---
title: "lab_08"
author: "derek willis"
date: "8/26/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## You will need

* A Census API key

## Load libraries and establish settings
```{r}
# Turn off scientific notation
options(scipen=999)

# Load the tidyverse.
library(tidyverse)
library(tidycensus)
```

## Setup Census API Key

You'll need your Census API Key:

```{r echo=FALSE}
census_api_key("YOUR KEY HERE", install=TRUE)
```

## Answer questions

**Q1** What is the Maryland jurisdiction with the lowest median age, according to the 2019 5-year estimates? You will need to find the variable for median age first.
**A1** Baltimore City, with an estimated median age of 35.4 years and a margin of error of 0.2 years.

```{r}
md_median_age <- get_acs(geography='county', variables=c(median_age='B01002_001'), state='MD')
arrange(md_median_age, estimate)
```

**Q2** Which Maryland jurisdictions have a median age of at least 50?
**A2** Talbot and Worcester counties

```{r}
md_median_age %>% filter(estimate >= 50)
```

**Q3** Considering the answers to the first two questions, what kinds of public needs do places with the demographic characteristics of Baltimore City have compared to the counties from Q2? What kinds of programs or services should the latter jurisdictions expect to spend more money on?
**A3**

**Q4** Which two Maryland jurisdictions have the most children between 5 and 17 that speak Spanish at home? Can you tell which one has the most?
**A4** Prince George's and Montgomery counties, although given the margin of error it's not clear which one has the most.

```{r}
speak_spanish_5_17 <- get_acs(geography='county', variables=c(speak_spanish_5_17='B16007_004'), state='MD')
arrange(speak_spanish_5_17, desc(estimate))
```

**Q5** Which Maryland jurisdiction has the largest percentage of its households without internet access? Hint: the total households variable is `DP02_0001`. For this question, you'll need to load households data and no internet data into separate dataframes, rename the `variable` columns in each to `households` and `no_internet`, respectively, remove the variable columns in each using select and then join them based on GEOID and NAME. Then you can add a column to calculate the percentage of households without internet.
**A5** Somerset County, with 22.2 percent

```{r}
md_households <- get_acs(geography='county', variables=c(households='DP02_0001'), state='MD') %>%
  rename('households'='estimate') %>%
  select(-variable)
md_no_internet <- get_acs(geography='county', variables=c(no_internet='B28002_013'), state='MD') %>%
  rename('no_internet'='estimate') %>%
  select(-variable)
md_combined <- md_households %>%
  left_join(md_no_internet, by='GEOID')
md_combined %>%
  mutate(pct_no_internet = (no_internet/households)*100) %>%
  arrange(desc(pct_no_internet))
```

**Q6** Of the Maryland jurisdictions listed in your answer to Q5, which one is the outlier? Write a couple of sentences describing what the others have in common and how you might frame a story pitch based on this data.
**A6** Baltimore City is the outlier - the others are both smaller in terms of population and more rural. Closing the broadband gap in Maryland will involve solving two different kinds of problems: extending Internet access to less-populated, rural areas of the state and also getting access to many in Baltimore City, where one in five households lack access to the Internet.
